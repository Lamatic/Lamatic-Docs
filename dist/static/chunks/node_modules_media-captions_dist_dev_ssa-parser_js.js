"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["node_modules_media-captions_dist_dev_ssa-parser_js"],{

/***/ "./node_modules/media-captions/dist/dev/ssa-parser.js":
/*!************************************************************!*\
  !*** ./node_modules/media-captions/dist/dev/ssa-parser.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SSAParser: function() { return /* binding */ SSAParser; },\n/* harmony export */   \"default\": function() { return /* binding */ createSSAParser; }\n/* harmony export */ });\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.js */ \"./node_modules/media-captions/dist/dev/index.js\");\n\n\nconst FORMAT_START_RE = /^Format:[\\s\\t]*/, STYLE_START_RE = /^Style:[\\s\\t]*/, DIALOGUE_START_RE = /^Dialogue:[\\s\\t]*/, FORMAT_SPLIT_RE = /[\\s\\t]*,[\\s\\t]*/, STYLE_FUNCTION_RE = /\\{[^}]+\\}/g, NEW_LINE_RE = /\\\\N/g, STYLES_SECTION_START_RE = /^\\[(.*)[\\s\\t]?Styles\\]$/, EVENTS_SECTION_START_RE = /^\\[(.*)[\\s\\t]?Events\\]$/;\nclass SSAParser {\n  _init;\n  _section = 0 /* None */;\n  _cue = null;\n  _cues = [];\n  _errors = [];\n  _format = null;\n  _errorBuilder;\n  _styles = {};\n  async init(init) {\n    this._init = init;\n    if (init.errors)\n      this._errorBuilder = (await __webpack_require__.e(/*! import() */ \"node_modules_media-captions_dist_dev_errors_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./errors.js */ \"./node_modules/media-captions/dist/dev/errors.js\"))).ParseErrorBuilder;\n  }\n  parse(line, lineCount) {\n    if (this._section) {\n      switch (this._section) {\n        case 1 /* Style */:\n          if (line === \"\") {\n            this._section = 0 /* None */;\n          } else if (STYLE_START_RE.test(line)) {\n            if (this._format) {\n              const styles = line.replace(STYLE_START_RE, \"\").split(FORMAT_SPLIT_RE);\n              this._parseStyles(styles);\n            } else {\n              this._handleError(this._errorBuilder?._missingFormat(\"Style\", lineCount));\n            }\n          } else if (FORMAT_START_RE.test(line)) {\n            this._format = line.replace(FORMAT_START_RE, \"\").split(FORMAT_SPLIT_RE);\n          } else if (EVENTS_SECTION_START_RE.test(line)) {\n            this._format = null;\n            this._section = 2 /* Event */;\n          }\n          break;\n        case 2 /* Event */:\n          if (line === \"\") {\n            this._commitCue();\n          } else if (DIALOGUE_START_RE.test(line)) {\n            this._commitCue();\n            if (this._format) {\n              const dialogue = line.replace(DIALOGUE_START_RE, \"\").split(FORMAT_SPLIT_RE), cue = this._parseDialogue(dialogue, lineCount);\n              if (cue)\n                this._cue = cue;\n            } else {\n              this._handleError(this._errorBuilder?._missingFormat(\"Dialogue\", lineCount));\n            }\n          } else if (this._cue) {\n            this._cue.text += \"\\n\" + line.replace(STYLE_FUNCTION_RE, \"\").replace(NEW_LINE_RE, \"\\n\");\n          } else if (FORMAT_START_RE.test(line)) {\n            this._format = line.replace(FORMAT_START_RE, \"\").split(FORMAT_SPLIT_RE);\n          } else if (STYLES_SECTION_START_RE.test(line)) {\n            this._format = null;\n            this._section = 1 /* Style */;\n          } else if (EVENTS_SECTION_START_RE.test(line)) {\n            this._format = null;\n          }\n      }\n    } else if (line === \"\") ; else if (STYLES_SECTION_START_RE.test(line)) {\n      this._format = null;\n      this._section = 1 /* Style */;\n    } else if (EVENTS_SECTION_START_RE.test(line)) {\n      this._format = null;\n      this._section = 2 /* Event */;\n    }\n  }\n  done() {\n    return {\n      metadata: {},\n      cues: this._cues,\n      regions: [],\n      errors: this._errors\n    };\n  }\n  _commitCue() {\n    if (!this._cue)\n      return;\n    this._cues.push(this._cue);\n    this._init.onCue?.(this._cue);\n    this._cue = null;\n  }\n  _parseStyles(values) {\n    let name = \"Default\", styles = {}, outlineX, align = \"center\", vertical = \"bottom\", marginV, outlineY = 1.2, outlineColor, bgColor, borderStyle = 3, transform = [];\n    for (let i = 0; i < this._format.length; i++) {\n      const field = this._format[i], value = values[i];\n      switch (field) {\n        case \"Name\":\n          name = value;\n          break;\n        case \"Fontname\":\n          styles[\"font-family\"] = value;\n          break;\n        case \"Fontsize\":\n          styles[\"font-size\"] = `calc(${value} / var(--overlay-height))`;\n          break;\n        case \"PrimaryColour\":\n          const color = parseColor(value);\n          if (color)\n            styles[\"--cue-color\"] = color;\n          break;\n        case \"BorderStyle\":\n          borderStyle = parseInt(value, 10);\n          break;\n        case \"BackColour\":\n          bgColor = parseColor(value);\n          break;\n        case \"OutlineColour\":\n          const _outlineColor = parseColor(value);\n          if (_outlineColor)\n            outlineColor = _outlineColor;\n          break;\n        case \"Bold\":\n          if (parseInt(value))\n            styles[\"font-weight\"] = \"bold\";\n          break;\n        case \"Italic\":\n          if (parseInt(value))\n            styles[\"font-style\"] = \"italic\";\n          break;\n        case \"Underline\":\n          if (parseInt(value))\n            styles[\"text-decoration\"] = \"underline\";\n          break;\n        case \"StrikeOut\":\n          if (parseInt(value))\n            styles[\"text-decoration\"] = \"line-through\";\n          break;\n        case \"Spacing\":\n          styles[\"letter-spacing\"] = value + \"px\";\n          break;\n        case \"AlphaLevel\":\n          styles[\"opacity\"] = parseFloat(value);\n          break;\n        case \"ScaleX\":\n          transform.push(`scaleX(${parseFloat(value) / 100})`);\n          break;\n        case \"ScaleY\":\n          transform.push(`scaleY(${parseFloat(value) / 100})`);\n          break;\n        case \"Angle\":\n          transform.push(`rotate(${value}deg)`);\n          break;\n        case \"Shadow\":\n          outlineY = parseInt(value, 10) * 1.2;\n          break;\n        case \"MarginL\":\n          styles[\"--cue-width\"] = \"auto\";\n          styles[\"--cue-left\"] = parseFloat(value) + \"px\";\n          break;\n        case \"MarginR\":\n          styles[\"--cue-width\"] = \"auto\";\n          styles[\"--cue-right\"] = parseFloat(value) + \"px\";\n          break;\n        case \"MarginV\":\n          marginV = parseFloat(value);\n          break;\n        case \"Outline\":\n          outlineX = parseInt(value, 10);\n          break;\n        case \"Alignment\":\n          const alignment = parseInt(value, 10);\n          if (alignment >= 4)\n            vertical = alignment >= 7 ? \"top\" : \"center\";\n          switch (alignment % 3) {\n            case 1:\n              align = \"start\";\n              break;\n            case 2:\n              align = \"center\";\n              break;\n            case 3:\n              align = \"end\";\n              break;\n          }\n      }\n    }\n    styles._vertical = vertical;\n    styles[\"--cue-white-space\"] = \"normal\";\n    styles[\"--cue-line-height\"] = \"normal\";\n    styles[\"--cue-text-align\"] = align;\n    if (vertical === \"center\") {\n      styles[`--cue-top`] = \"50%\";\n      transform.push(\"translateY(-50%)\");\n    } else {\n      styles[`--cue-${vertical}`] = (marginV || 0) + \"px\";\n    }\n    if (borderStyle === 1) {\n      styles[\"--cue-padding-y\"] = \"0\";\n    }\n    if (borderStyle === 1 || bgColor) {\n      styles[\"--cue-bg-color\"] = borderStyle === 1 ? \"none\" : bgColor;\n    }\n    if (borderStyle === 3 && outlineColor) {\n      styles[\"--cue-outline\"] = `${outlineX}px solid ${outlineColor}`;\n    }\n    if (borderStyle === 1 && typeof outlineX === \"number\") {\n      const color = bgColor ?? \"#000\";\n      styles[\"--cue-text-shadow\"] = [\n        outlineColor && buildTextShadow(outlineX * 1.2, outlineY * 1.2, outlineColor),\n        outlineColor ? buildTextShadow(outlineX * (outlineX / 2), outlineY * (outlineX / 2), color) : buildTextShadow(outlineX, outlineY, color)\n      ].filter(Boolean).join(\", \");\n    }\n    if (transform.length)\n      styles[\"--cue-transform\"] = transform.join(\" \");\n    this._styles[name] = styles;\n  }\n  _parseDialogue(values, lineCount) {\n    const fields = this._buildFields(values);\n    const timestamp = this._parseTimestamp(fields.Start, fields.End, lineCount);\n    if (!timestamp)\n      return;\n    const cue = new _index_js__WEBPACK_IMPORTED_MODULE_0__.b(timestamp[0], timestamp[1], \"\"), styles = { ...this._styles[fields.Style] || {} }, voice = fields.Name ? `<v ${fields.Name}>` : \"\";\n    const vertical = styles._vertical, marginLeft = fields.MarginL && parseFloat(fields.MarginL), marginRight = fields.MarginR && parseFloat(fields.MarginR), marginV = fields.MarginV && parseFloat(fields.MarginV);\n    if (marginLeft) {\n      styles[\"--cue-width\"] = \"auto\";\n      styles[\"--cue-left\"] = marginLeft + \"px\";\n    }\n    if (marginRight) {\n      styles[\"--cue-width\"] = \"auto\";\n      styles[\"--cue-right\"] = marginRight + \"px\";\n    }\n    if (marginV && vertical !== \"center\") {\n      styles[`--cue-${vertical}`] = marginV + \"px\";\n    }\n    cue.text = voice + values.slice(this._format.length - 1).join(\", \").replace(STYLE_FUNCTION_RE, \"\").replace(NEW_LINE_RE, \"\\n\");\n    delete styles._vertical;\n    if (Object.keys(styles).length)\n      cue.style = styles;\n    return cue;\n  }\n  _buildFields(values) {\n    const fields = {};\n    for (let i = 0; i < this._format.length; i++) {\n      fields[this._format[i]] = values[i];\n    }\n    return fields;\n  }\n  _parseTimestamp(startTimeText, endTimeText, lineCount) {\n    const startTime = (0,_index_js__WEBPACK_IMPORTED_MODULE_0__.p)(startTimeText), endTime = (0,_index_js__WEBPACK_IMPORTED_MODULE_0__.p)(endTimeText);\n    if (startTime !== null && endTime !== null && endTime > startTime) {\n      return [startTime, endTime];\n    } else {\n      if (startTime === null) {\n        this._handleError(this._errorBuilder?._badStartTimestamp(startTimeText, lineCount));\n      }\n      if (endTime === null) {\n        this._handleError(this._errorBuilder?._badEndTimestamp(endTimeText, lineCount));\n      }\n      if (startTime != null && endTime !== null && endTime > startTime) {\n        this._handleError(this._errorBuilder?._badRangeTimestamp(startTime, endTime, lineCount));\n      }\n    }\n  }\n  _handleError(error) {\n    if (!error)\n      return;\n    this._errors.push(error);\n    if (this._init.strict) {\n      this._init.cancel();\n      throw error;\n    } else {\n      this._init.onError?.(error);\n    }\n  }\n}\nfunction parseColor(color) {\n  const abgr = parseInt(color.replace(\"&H\", \"\"), 16);\n  if (abgr >= 0) {\n    const a = abgr >> 24 & 255 ^ 255;\n    const alpha = a / 255;\n    const b = abgr >> 16 & 255;\n    const g = abgr >> 8 & 255;\n    const r = abgr & 255;\n    return \"rgba(\" + [r, g, b, alpha].join(\",\") + \")\";\n  }\n  return null;\n}\nfunction buildTextShadow(x, y, color) {\n  const noOfShadows = Math.ceil(2 * Math.PI * x);\n  let textShadow = \"\";\n  for (let i = 0; i < noOfShadows; i++) {\n    const theta = 2 * Math.PI * i / noOfShadows;\n    textShadow += x * Math.cos(theta) + \"px \" + y * Math.sin(theta) + \"px 0 \" + color + (i == noOfShadows - 1 ? \"\" : \",\");\n  }\n  return textShadow;\n}\nfunction createSSAParser() {\n  return new SSAParser();\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbWVkaWEtY2FwdGlvbnMvZGlzdC9kZXYvc3NhLXBhcnNlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBaUU7O0FBRWpFLG1MQUFtTCxHQUFHLElBQUk7QUFDMUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGtOQUFxQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSxZQUFZO0FBQ1o7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxNQUFNLHdCQUF3QjtBQUM5QjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQyxvQkFBb0IseUJBQXlCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxPQUFPO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHdCQUF3QjtBQUMzRDtBQUNBO0FBQ0EsbUNBQW1DLHdCQUF3QjtBQUMzRDtBQUNBO0FBQ0EsbUNBQW1DLE1BQU07QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHNCQUFzQixTQUFTO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsU0FBUyxXQUFXLGFBQWE7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3Q0FBTSw2Q0FBNkMscUNBQXFDLDhCQUE4QixZQUFZO0FBQ3RKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLFNBQVM7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHlCQUF5QjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDRDQUFpQiwyQkFBMkIsNENBQWlCO0FBQ25GO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlCQUFpQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVpRCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWEtY2FwdGlvbnMvZGlzdC9kZXYvc3NhLXBhcnNlci5qcz9lYzE3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGIgYXMgVlRUQ3VlLCBwIGFzIHBhcnNlVlRUVGltZXN0YW1wIH0gZnJvbSAnLi9pbmRleC5qcyc7XG5cbmNvbnN0IEZPUk1BVF9TVEFSVF9SRSA9IC9eRm9ybWF0OltcXHNcXHRdKi8sIFNUWUxFX1NUQVJUX1JFID0gL15TdHlsZTpbXFxzXFx0XSovLCBESUFMT0dVRV9TVEFSVF9SRSA9IC9eRGlhbG9ndWU6W1xcc1xcdF0qLywgRk9STUFUX1NQTElUX1JFID0gL1tcXHNcXHRdKixbXFxzXFx0XSovLCBTVFlMRV9GVU5DVElPTl9SRSA9IC9cXHtbXn1dK1xcfS9nLCBORVdfTElORV9SRSA9IC9cXFxcTi9nLCBTVFlMRVNfU0VDVElPTl9TVEFSVF9SRSA9IC9eXFxbKC4qKVtcXHNcXHRdP1N0eWxlc1xcXSQvLCBFVkVOVFNfU0VDVElPTl9TVEFSVF9SRSA9IC9eXFxbKC4qKVtcXHNcXHRdP0V2ZW50c1xcXSQvO1xuY2xhc3MgU1NBUGFyc2VyIHtcbiAgX2luaXQ7XG4gIF9zZWN0aW9uID0gMCAvKiBOb25lICovO1xuICBfY3VlID0gbnVsbDtcbiAgX2N1ZXMgPSBbXTtcbiAgX2Vycm9ycyA9IFtdO1xuICBfZm9ybWF0ID0gbnVsbDtcbiAgX2Vycm9yQnVpbGRlcjtcbiAgX3N0eWxlcyA9IHt9O1xuICBhc3luYyBpbml0KGluaXQpIHtcbiAgICB0aGlzLl9pbml0ID0gaW5pdDtcbiAgICBpZiAoaW5pdC5lcnJvcnMpXG4gICAgICB0aGlzLl9lcnJvckJ1aWxkZXIgPSAoYXdhaXQgaW1wb3J0KCcuL2Vycm9ycy5qcycpKS5QYXJzZUVycm9yQnVpbGRlcjtcbiAgfVxuICBwYXJzZShsaW5lLCBsaW5lQ291bnQpIHtcbiAgICBpZiAodGhpcy5fc2VjdGlvbikge1xuICAgICAgc3dpdGNoICh0aGlzLl9zZWN0aW9uKSB7XG4gICAgICAgIGNhc2UgMSAvKiBTdHlsZSAqLzpcbiAgICAgICAgICBpZiAobGluZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgdGhpcy5fc2VjdGlvbiA9IDAgLyogTm9uZSAqLztcbiAgICAgICAgICB9IGVsc2UgaWYgKFNUWUxFX1NUQVJUX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9mb3JtYXQpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc3R5bGVzID0gbGluZS5yZXBsYWNlKFNUWUxFX1NUQVJUX1JFLCBcIlwiKS5zcGxpdChGT1JNQVRfU1BMSVRfUkUpO1xuICAgICAgICAgICAgICB0aGlzLl9wYXJzZVN0eWxlcyhzdHlsZXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5faGFuZGxlRXJyb3IodGhpcy5fZXJyb3JCdWlsZGVyPy5fbWlzc2luZ0Zvcm1hdChcIlN0eWxlXCIsIGxpbmVDb3VudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoRk9STUFUX1NUQVJUX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1hdCA9IGxpbmUucmVwbGFjZShGT1JNQVRfU1RBUlRfUkUsIFwiXCIpLnNwbGl0KEZPUk1BVF9TUExJVF9SRSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChFVkVOVFNfU0VDVElPTl9TVEFSVF9SRS50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICB0aGlzLl9mb3JtYXQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fc2VjdGlvbiA9IDIgLyogRXZlbnQgKi87XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDIgLyogRXZlbnQgKi86XG4gICAgICAgICAgaWYgKGxpbmUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbW1pdEN1ZSgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoRElBTE9HVUVfU1RBUlRfUkUudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgdGhpcy5fY29tbWl0Q3VlKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5fZm9ybWF0KSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ3VlID0gbGluZS5yZXBsYWNlKERJQUxPR1VFX1NUQVJUX1JFLCBcIlwiKS5zcGxpdChGT1JNQVRfU1BMSVRfUkUpLCBjdWUgPSB0aGlzLl9wYXJzZURpYWxvZ3VlKGRpYWxvZ3VlLCBsaW5lQ291bnQpO1xuICAgICAgICAgICAgICBpZiAoY3VlKVxuICAgICAgICAgICAgICAgIHRoaXMuX2N1ZSA9IGN1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuX2hhbmRsZUVycm9yKHRoaXMuX2Vycm9yQnVpbGRlcj8uX21pc3NpbmdGb3JtYXQoXCJEaWFsb2d1ZVwiLCBsaW5lQ291bnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2N1ZSkge1xuICAgICAgICAgICAgdGhpcy5fY3VlLnRleHQgKz0gXCJcXG5cIiArIGxpbmUucmVwbGFjZShTVFlMRV9GVU5DVElPTl9SRSwgXCJcIikucmVwbGFjZShORVdfTElORV9SRSwgXCJcXG5cIik7XG4gICAgICAgICAgfSBlbHNlIGlmIChGT1JNQVRfU1RBUlRfUkUudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgdGhpcy5fZm9ybWF0ID0gbGluZS5yZXBsYWNlKEZPUk1BVF9TVEFSVF9SRSwgXCJcIikuc3BsaXQoRk9STUFUX1NQTElUX1JFKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKFNUWUxFU19TRUNUSU9OX1NUQVJUX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1hdCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9zZWN0aW9uID0gMSAvKiBTdHlsZSAqLztcbiAgICAgICAgICB9IGVsc2UgaWYgKEVWRU5UU19TRUNUSU9OX1NUQVJUX1JFLnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1hdCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobGluZSA9PT0gXCJcIikgOyBlbHNlIGlmIChTVFlMRVNfU0VDVElPTl9TVEFSVF9SRS50ZXN0KGxpbmUpKSB7XG4gICAgICB0aGlzLl9mb3JtYXQgPSBudWxsO1xuICAgICAgdGhpcy5fc2VjdGlvbiA9IDEgLyogU3R5bGUgKi87XG4gICAgfSBlbHNlIGlmIChFVkVOVFNfU0VDVElPTl9TVEFSVF9SRS50ZXN0KGxpbmUpKSB7XG4gICAgICB0aGlzLl9mb3JtYXQgPSBudWxsO1xuICAgICAgdGhpcy5fc2VjdGlvbiA9IDIgLyogRXZlbnQgKi87XG4gICAgfVxuICB9XG4gIGRvbmUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1ldGFkYXRhOiB7fSxcbiAgICAgIGN1ZXM6IHRoaXMuX2N1ZXMsXG4gICAgICByZWdpb25zOiBbXSxcbiAgICAgIGVycm9yczogdGhpcy5fZXJyb3JzXG4gICAgfTtcbiAgfVxuICBfY29tbWl0Q3VlKCkge1xuICAgIGlmICghdGhpcy5fY3VlKVxuICAgICAgcmV0dXJuO1xuICAgIHRoaXMuX2N1ZXMucHVzaCh0aGlzLl9jdWUpO1xuICAgIHRoaXMuX2luaXQub25DdWU/Lih0aGlzLl9jdWUpO1xuICAgIHRoaXMuX2N1ZSA9IG51bGw7XG4gIH1cbiAgX3BhcnNlU3R5bGVzKHZhbHVlcykge1xuICAgIGxldCBuYW1lID0gXCJEZWZhdWx0XCIsIHN0eWxlcyA9IHt9LCBvdXRsaW5lWCwgYWxpZ24gPSBcImNlbnRlclwiLCB2ZXJ0aWNhbCA9IFwiYm90dG9tXCIsIG1hcmdpblYsIG91dGxpbmVZID0gMS4yLCBvdXRsaW5lQ29sb3IsIGJnQ29sb3IsIGJvcmRlclN0eWxlID0gMywgdHJhbnNmb3JtID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9mb3JtYXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGZpZWxkID0gdGhpcy5fZm9ybWF0W2ldLCB2YWx1ZSA9IHZhbHVlc1tpXTtcbiAgICAgIHN3aXRjaCAoZmllbGQpIHtcbiAgICAgICAgY2FzZSBcIk5hbWVcIjpcbiAgICAgICAgICBuYW1lID0gdmFsdWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJGb250bmFtZVwiOlxuICAgICAgICAgIHN0eWxlc1tcImZvbnQtZmFtaWx5XCJdID0gdmFsdWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJGb250c2l6ZVwiOlxuICAgICAgICAgIHN0eWxlc1tcImZvbnQtc2l6ZVwiXSA9IGBjYWxjKCR7dmFsdWV9IC8gdmFyKC0tb3ZlcmxheS1oZWlnaHQpKWA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJQcmltYXJ5Q29sb3VyXCI6XG4gICAgICAgICAgY29uc3QgY29sb3IgPSBwYXJzZUNvbG9yKHZhbHVlKTtcbiAgICAgICAgICBpZiAoY29sb3IpXG4gICAgICAgICAgICBzdHlsZXNbXCItLWN1ZS1jb2xvclwiXSA9IGNvbG9yO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQm9yZGVyU3R5bGVcIjpcbiAgICAgICAgICBib3JkZXJTdHlsZSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJCYWNrQ29sb3VyXCI6XG4gICAgICAgICAgYmdDb2xvciA9IHBhcnNlQ29sb3IodmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiT3V0bGluZUNvbG91clwiOlxuICAgICAgICAgIGNvbnN0IF9vdXRsaW5lQ29sb3IgPSBwYXJzZUNvbG9yKHZhbHVlKTtcbiAgICAgICAgICBpZiAoX291dGxpbmVDb2xvcilcbiAgICAgICAgICAgIG91dGxpbmVDb2xvciA9IF9vdXRsaW5lQ29sb3I7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJCb2xkXCI6XG4gICAgICAgICAgaWYgKHBhcnNlSW50KHZhbHVlKSlcbiAgICAgICAgICAgIHN0eWxlc1tcImZvbnQtd2VpZ2h0XCJdID0gXCJib2xkXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJJdGFsaWNcIjpcbiAgICAgICAgICBpZiAocGFyc2VJbnQodmFsdWUpKVxuICAgICAgICAgICAgc3R5bGVzW1wiZm9udC1zdHlsZVwiXSA9IFwiaXRhbGljXCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJVbmRlcmxpbmVcIjpcbiAgICAgICAgICBpZiAocGFyc2VJbnQodmFsdWUpKVxuICAgICAgICAgICAgc3R5bGVzW1widGV4dC1kZWNvcmF0aW9uXCJdID0gXCJ1bmRlcmxpbmVcIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlN0cmlrZU91dFwiOlxuICAgICAgICAgIGlmIChwYXJzZUludCh2YWx1ZSkpXG4gICAgICAgICAgICBzdHlsZXNbXCJ0ZXh0LWRlY29yYXRpb25cIl0gPSBcImxpbmUtdGhyb3VnaFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiU3BhY2luZ1wiOlxuICAgICAgICAgIHN0eWxlc1tcImxldHRlci1zcGFjaW5nXCJdID0gdmFsdWUgKyBcInB4XCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJBbHBoYUxldmVsXCI6XG4gICAgICAgICAgc3R5bGVzW1wib3BhY2l0eVwiXSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiU2NhbGVYXCI6XG4gICAgICAgICAgdHJhbnNmb3JtLnB1c2goYHNjYWxlWCgke3BhcnNlRmxvYXQodmFsdWUpIC8gMTAwfSlgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlNjYWxlWVwiOlxuICAgICAgICAgIHRyYW5zZm9ybS5wdXNoKGBzY2FsZVkoJHtwYXJzZUZsb2F0KHZhbHVlKSAvIDEwMH0pYCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJBbmdsZVwiOlxuICAgICAgICAgIHRyYW5zZm9ybS5wdXNoKGByb3RhdGUoJHt2YWx1ZX1kZWcpYCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJTaGFkb3dcIjpcbiAgICAgICAgICBvdXRsaW5lWSA9IHBhcnNlSW50KHZhbHVlLCAxMCkgKiAxLjI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJNYXJnaW5MXCI6XG4gICAgICAgICAgc3R5bGVzW1wiLS1jdWUtd2lkdGhcIl0gPSBcImF1dG9cIjtcbiAgICAgICAgICBzdHlsZXNbXCItLWN1ZS1sZWZ0XCJdID0gcGFyc2VGbG9hdCh2YWx1ZSkgKyBcInB4XCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJNYXJnaW5SXCI6XG4gICAgICAgICAgc3R5bGVzW1wiLS1jdWUtd2lkdGhcIl0gPSBcImF1dG9cIjtcbiAgICAgICAgICBzdHlsZXNbXCItLWN1ZS1yaWdodFwiXSA9IHBhcnNlRmxvYXQodmFsdWUpICsgXCJweFwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiTWFyZ2luVlwiOlxuICAgICAgICAgIG1hcmdpblYgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIk91dGxpbmVcIjpcbiAgICAgICAgICBvdXRsaW5lWCA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJBbGlnbm1lbnRcIjpcbiAgICAgICAgICBjb25zdCBhbGlnbm1lbnQgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgIGlmIChhbGlnbm1lbnQgPj0gNClcbiAgICAgICAgICAgIHZlcnRpY2FsID0gYWxpZ25tZW50ID49IDcgPyBcInRvcFwiIDogXCJjZW50ZXJcIjtcbiAgICAgICAgICBzd2l0Y2ggKGFsaWdubWVudCAlIDMpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgYWxpZ24gPSBcInN0YXJ0XCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICBhbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICBhbGlnbiA9IFwiZW5kXCI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgc3R5bGVzLl92ZXJ0aWNhbCA9IHZlcnRpY2FsO1xuICAgIHN0eWxlc1tcIi0tY3VlLXdoaXRlLXNwYWNlXCJdID0gXCJub3JtYWxcIjtcbiAgICBzdHlsZXNbXCItLWN1ZS1saW5lLWhlaWdodFwiXSA9IFwibm9ybWFsXCI7XG4gICAgc3R5bGVzW1wiLS1jdWUtdGV4dC1hbGlnblwiXSA9IGFsaWduO1xuICAgIGlmICh2ZXJ0aWNhbCA9PT0gXCJjZW50ZXJcIikge1xuICAgICAgc3R5bGVzW2AtLWN1ZS10b3BgXSA9IFwiNTAlXCI7XG4gICAgICB0cmFuc2Zvcm0ucHVzaChcInRyYW5zbGF0ZVkoLTUwJSlcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlc1tgLS1jdWUtJHt2ZXJ0aWNhbH1gXSA9IChtYXJnaW5WIHx8IDApICsgXCJweFwiO1xuICAgIH1cbiAgICBpZiAoYm9yZGVyU3R5bGUgPT09IDEpIHtcbiAgICAgIHN0eWxlc1tcIi0tY3VlLXBhZGRpbmcteVwiXSA9IFwiMFwiO1xuICAgIH1cbiAgICBpZiAoYm9yZGVyU3R5bGUgPT09IDEgfHwgYmdDb2xvcikge1xuICAgICAgc3R5bGVzW1wiLS1jdWUtYmctY29sb3JcIl0gPSBib3JkZXJTdHlsZSA9PT0gMSA/IFwibm9uZVwiIDogYmdDb2xvcjtcbiAgICB9XG4gICAgaWYgKGJvcmRlclN0eWxlID09PSAzICYmIG91dGxpbmVDb2xvcikge1xuICAgICAgc3R5bGVzW1wiLS1jdWUtb3V0bGluZVwiXSA9IGAke291dGxpbmVYfXB4IHNvbGlkICR7b3V0bGluZUNvbG9yfWA7XG4gICAgfVxuICAgIGlmIChib3JkZXJTdHlsZSA9PT0gMSAmJiB0eXBlb2Ygb3V0bGluZVggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIGNvbnN0IGNvbG9yID0gYmdDb2xvciA/PyBcIiMwMDBcIjtcbiAgICAgIHN0eWxlc1tcIi0tY3VlLXRleHQtc2hhZG93XCJdID0gW1xuICAgICAgICBvdXRsaW5lQ29sb3IgJiYgYnVpbGRUZXh0U2hhZG93KG91dGxpbmVYICogMS4yLCBvdXRsaW5lWSAqIDEuMiwgb3V0bGluZUNvbG9yKSxcbiAgICAgICAgb3V0bGluZUNvbG9yID8gYnVpbGRUZXh0U2hhZG93KG91dGxpbmVYICogKG91dGxpbmVYIC8gMiksIG91dGxpbmVZICogKG91dGxpbmVYIC8gMiksIGNvbG9yKSA6IGJ1aWxkVGV4dFNoYWRvdyhvdXRsaW5lWCwgb3V0bGluZVksIGNvbG9yKVxuICAgICAgXS5maWx0ZXIoQm9vbGVhbikuam9pbihcIiwgXCIpO1xuICAgIH1cbiAgICBpZiAodHJhbnNmb3JtLmxlbmd0aClcbiAgICAgIHN0eWxlc1tcIi0tY3VlLXRyYW5zZm9ybVwiXSA9IHRyYW5zZm9ybS5qb2luKFwiIFwiKTtcbiAgICB0aGlzLl9zdHlsZXNbbmFtZV0gPSBzdHlsZXM7XG4gIH1cbiAgX3BhcnNlRGlhbG9ndWUodmFsdWVzLCBsaW5lQ291bnQpIHtcbiAgICBjb25zdCBmaWVsZHMgPSB0aGlzLl9idWlsZEZpZWxkcyh2YWx1ZXMpO1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IHRoaXMuX3BhcnNlVGltZXN0YW1wKGZpZWxkcy5TdGFydCwgZmllbGRzLkVuZCwgbGluZUNvdW50KTtcbiAgICBpZiAoIXRpbWVzdGFtcClcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBjdWUgPSBuZXcgVlRUQ3VlKHRpbWVzdGFtcFswXSwgdGltZXN0YW1wWzFdLCBcIlwiKSwgc3R5bGVzID0geyAuLi50aGlzLl9zdHlsZXNbZmllbGRzLlN0eWxlXSB8fCB7fSB9LCB2b2ljZSA9IGZpZWxkcy5OYW1lID8gYDx2ICR7ZmllbGRzLk5hbWV9PmAgOiBcIlwiO1xuICAgIGNvbnN0IHZlcnRpY2FsID0gc3R5bGVzLl92ZXJ0aWNhbCwgbWFyZ2luTGVmdCA9IGZpZWxkcy5NYXJnaW5MICYmIHBhcnNlRmxvYXQoZmllbGRzLk1hcmdpbkwpLCBtYXJnaW5SaWdodCA9IGZpZWxkcy5NYXJnaW5SICYmIHBhcnNlRmxvYXQoZmllbGRzLk1hcmdpblIpLCBtYXJnaW5WID0gZmllbGRzLk1hcmdpblYgJiYgcGFyc2VGbG9hdChmaWVsZHMuTWFyZ2luVik7XG4gICAgaWYgKG1hcmdpbkxlZnQpIHtcbiAgICAgIHN0eWxlc1tcIi0tY3VlLXdpZHRoXCJdID0gXCJhdXRvXCI7XG4gICAgICBzdHlsZXNbXCItLWN1ZS1sZWZ0XCJdID0gbWFyZ2luTGVmdCArIFwicHhcIjtcbiAgICB9XG4gICAgaWYgKG1hcmdpblJpZ2h0KSB7XG4gICAgICBzdHlsZXNbXCItLWN1ZS13aWR0aFwiXSA9IFwiYXV0b1wiO1xuICAgICAgc3R5bGVzW1wiLS1jdWUtcmlnaHRcIl0gPSBtYXJnaW5SaWdodCArIFwicHhcIjtcbiAgICB9XG4gICAgaWYgKG1hcmdpblYgJiYgdmVydGljYWwgIT09IFwiY2VudGVyXCIpIHtcbiAgICAgIHN0eWxlc1tgLS1jdWUtJHt2ZXJ0aWNhbH1gXSA9IG1hcmdpblYgKyBcInB4XCI7XG4gICAgfVxuICAgIGN1ZS50ZXh0ID0gdm9pY2UgKyB2YWx1ZXMuc2xpY2UodGhpcy5fZm9ybWF0Lmxlbmd0aCAtIDEpLmpvaW4oXCIsIFwiKS5yZXBsYWNlKFNUWUxFX0ZVTkNUSU9OX1JFLCBcIlwiKS5yZXBsYWNlKE5FV19MSU5FX1JFLCBcIlxcblwiKTtcbiAgICBkZWxldGUgc3R5bGVzLl92ZXJ0aWNhbDtcbiAgICBpZiAoT2JqZWN0LmtleXMoc3R5bGVzKS5sZW5ndGgpXG4gICAgICBjdWUuc3R5bGUgPSBzdHlsZXM7XG4gICAgcmV0dXJuIGN1ZTtcbiAgfVxuICBfYnVpbGRGaWVsZHModmFsdWVzKSB7XG4gICAgY29uc3QgZmllbGRzID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9mb3JtYXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZpZWxkc1t0aGlzLl9mb3JtYXRbaV1dID0gdmFsdWVzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gZmllbGRzO1xuICB9XG4gIF9wYXJzZVRpbWVzdGFtcChzdGFydFRpbWVUZXh0LCBlbmRUaW1lVGV4dCwgbGluZUNvdW50KSB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gcGFyc2VWVFRUaW1lc3RhbXAoc3RhcnRUaW1lVGV4dCksIGVuZFRpbWUgPSBwYXJzZVZUVFRpbWVzdGFtcChlbmRUaW1lVGV4dCk7XG4gICAgaWYgKHN0YXJ0VGltZSAhPT0gbnVsbCAmJiBlbmRUaW1lICE9PSBudWxsICYmIGVuZFRpbWUgPiBzdGFydFRpbWUpIHtcbiAgICAgIHJldHVybiBbc3RhcnRUaW1lLCBlbmRUaW1lXTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHN0YXJ0VGltZSA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVFcnJvcih0aGlzLl9lcnJvckJ1aWxkZXI/Ll9iYWRTdGFydFRpbWVzdGFtcChzdGFydFRpbWVUZXh0LCBsaW5lQ291bnQpKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbmRUaW1lID09PSBudWxsKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVycm9yKHRoaXMuX2Vycm9yQnVpbGRlcj8uX2JhZEVuZFRpbWVzdGFtcChlbmRUaW1lVGV4dCwgbGluZUNvdW50KSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RhcnRUaW1lICE9IG51bGwgJiYgZW5kVGltZSAhPT0gbnVsbCAmJiBlbmRUaW1lID4gc3RhcnRUaW1lKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVycm9yKHRoaXMuX2Vycm9yQnVpbGRlcj8uX2JhZFJhbmdlVGltZXN0YW1wKHN0YXJ0VGltZSwgZW5kVGltZSwgbGluZUNvdW50KSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIF9oYW5kbGVFcnJvcihlcnJvcikge1xuICAgIGlmICghZXJyb3IpXG4gICAgICByZXR1cm47XG4gICAgdGhpcy5fZXJyb3JzLnB1c2goZXJyb3IpO1xuICAgIGlmICh0aGlzLl9pbml0LnN0cmljdCkge1xuICAgICAgdGhpcy5faW5pdC5jYW5jZWwoKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pbml0Lm9uRXJyb3I/LihlcnJvcik7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBwYXJzZUNvbG9yKGNvbG9yKSB7XG4gIGNvbnN0IGFiZ3IgPSBwYXJzZUludChjb2xvci5yZXBsYWNlKFwiJkhcIiwgXCJcIiksIDE2KTtcbiAgaWYgKGFiZ3IgPj0gMCkge1xuICAgIGNvbnN0IGEgPSBhYmdyID4+IDI0ICYgMjU1IF4gMjU1O1xuICAgIGNvbnN0IGFscGhhID0gYSAvIDI1NTtcbiAgICBjb25zdCBiID0gYWJnciA+PiAxNiAmIDI1NTtcbiAgICBjb25zdCBnID0gYWJnciA+PiA4ICYgMjU1O1xuICAgIGNvbnN0IHIgPSBhYmdyICYgMjU1O1xuICAgIHJldHVybiBcInJnYmEoXCIgKyBbciwgZywgYiwgYWxwaGFdLmpvaW4oXCIsXCIpICsgXCIpXCI7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBidWlsZFRleHRTaGFkb3coeCwgeSwgY29sb3IpIHtcbiAgY29uc3Qgbm9PZlNoYWRvd3MgPSBNYXRoLmNlaWwoMiAqIE1hdGguUEkgKiB4KTtcbiAgbGV0IHRleHRTaGFkb3cgPSBcIlwiO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG5vT2ZTaGFkb3dzOyBpKyspIHtcbiAgICBjb25zdCB0aGV0YSA9IDIgKiBNYXRoLlBJICogaSAvIG5vT2ZTaGFkb3dzO1xuICAgIHRleHRTaGFkb3cgKz0geCAqIE1hdGguY29zKHRoZXRhKSArIFwicHggXCIgKyB5ICogTWF0aC5zaW4odGhldGEpICsgXCJweCAwIFwiICsgY29sb3IgKyAoaSA9PSBub09mU2hhZG93cyAtIDEgPyBcIlwiIDogXCIsXCIpO1xuICB9XG4gIHJldHVybiB0ZXh0U2hhZG93O1xufVxuZnVuY3Rpb24gY3JlYXRlU1NBUGFyc2VyKCkge1xuICByZXR1cm4gbmV3IFNTQVBhcnNlcigpO1xufVxuXG5leHBvcnQgeyBTU0FQYXJzZXIsIGNyZWF0ZVNTQVBhcnNlciBhcyBkZWZhdWx0IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/media-captions/dist/dev/ssa-parser.js\n"));

/***/ })

}]);